<html>
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8">
	<title>index</title>
	<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>	
	<script src="../lib/jquery.cookie.js"></script>
	<script src="../baasbox.js"></script>
		
	<script type="text/javascript" charset="utf-8">
	
	$( document ).ready(function() {
		
		BaasBox.setEndPoint("http://localhost:9000");
		BaasBox.appcode = "1234567890";
	
		$("#login").click(function() {
			BaasBox.login("test", "test")
				.done(function (user) {
					console.log("Logged in ", user);
				})
				.fail(function (err) {
					console.log("error ", err);
				})
		});

		$("#logout").click(function () {
			BaasBox.logout()
			  .done(function (res) {
			  	console.log(res);
			  })
			  .fail(function (error) {
			  	console.log("error ", error);
			  })
		});

		$("#signup").click(function() {
			BaasBox.signup("test", "test")
				.done(function (res) {
			  	console.log("outer singup ", res);
			  })
			  .fail(function (error) {
			  	console.log("error ", error);
			  })
		});

		$("#loadCollection").click(function() {
			BaasBox.loadCollection("test")
			  .done(function(res) {
			  	console.log("res ", res);
			  })
			  .fail(function(error) {
			  	console.log("error ", error);
			  })
		});

		$("#loadCollectionWithParams").click(function() {
			BaasBox.loadCollectionWithParams("test", {page: 0, recordsPerPage: BaasBox.pagelength})
			  .done(function(res) {
			  	console.log("res ", res);
			  })
			  .fail(function(error) {
			  	console.log("error ", error);
			  })
		});

		$("#save").click(function () {
			var o = new Object();
			o.list = ["margherita", "capricciosa"];
			o.address = "Prince Street 100, New York, NY";		
			BaasBox.save(o, "test")
			  .done(function(res) {
			  	console.log("res ", res);
			  })
			  .fail(function(error) {
			  	console.log("error ", error);
			  })
		});

		$("#update").click(function () {
				BaasBox.loadCollection("test")
			    .done(function(res) {
			  	  objectId = res[0].id;
			  	  console.log("updating object with id ", objectId)
						BaasBox.updateField(objectId, "test", "address", "new address")
						  .done(function(res) {
						  	console.log("res ", res);
						  })
						  .fail(function(error) {
						  	console.log("error ", error);
						  })
			    })
			    .fail(function(error) {
			  	  console.log("error ", error);
			    })			
		 });

		$("#delete").click(function () {
				BaasBox.loadCollection("test")
			    .done(function(res) {
			  	  objectId = res[0].id;
			  	  console.log("deleting object with id ", objectId)
						BaasBox.delete(objectId, "test")
						  .done(function(res) {
						  	console.log("res ", res);
						  })
						  .fail(function(error) {
						  	console.log("error ", error);
						  })
			    })
			    .fail(function(error) {
			  	  console.log("error ", error);
			    })
		});

		$("#loadJSONAsset").click(function() {
			BaasBox.loadAssetData("test")
			  .done(function(res) {
			  	console.log("res ", res);
			  })
			  .fail(function(error) {
			  	console.log("error ", error);
			  })
		});
		
		$("#loadImage").click(function () {
			BaasBox.getImageURI("testimage", {'resizeId' : 1})
			  .done(function(res) {
			  	console.log("image URI is ", res['data']);
			  })
			  .fail(function(error) {
			  	console.log("error ", error);
			  })
		});

	});
		
	</script>
	
</head>
<body>
	<a id="login" href="#">login</a> <br>
	<a id="logout" href="#">logout</a><br>
	<a id="signup" href="#">signup</a><br>
	<a id="save" href="#">save</a><br>
	<a id="loadCollection" href="#">load collection</a> <br>
	<a id="loadCollectionWithParams" href="#">load collection with params</a> <br>
	<a id="update" href="#">update field</a><br>
	<a id="delete" href="#">delete</a><br>
	<a id="loadJSONAsset" href="#">load JSON asset</a> <br>
	<a id="loadImage" href="#">loadImage</a><br>
</body>
</htm>